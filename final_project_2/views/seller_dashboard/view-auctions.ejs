<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Auctions - DriveBidRent</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap");

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Montserrat", sans-serif;
}

body {
  background-color: #ffffff;
  color: #333333;
}

/* Seller Dashboard Content */
.seller-dashboard {
  padding: 4rem 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

.seller-dashboard h1 {
  color: #ff6b00;
  font-size: 2.5rem;
  margin-bottom: 2rem;
  text-align: center;
}

.dashboard-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
}

.dashboard-card {
  background-color: #ffffff;
  padding: 1.5rem;
  border-radius: 1rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.dashboard-card:hover {
  transform: scale(1.05);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
}

.dashboard-card h2 {
  color: #ff6b00;
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.dashboard-card p {
  margin-bottom: 0.5rem;
  color: #666666;
}

.card-btn {
  display: inline-block;
  background: linear-gradient(135deg, #ff6b00, #ff9a44);
  color: white;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 0.5rem;
  text-decoration: none;
  font-weight: 500;
  transition: background 0.3s ease;
  margin: 0.5rem;
}

.card-btn:hover {
  background: linear-gradient(135deg, #ff9a44, #ff6b00);
}

.status-pending {
  color: #FFA500;
  font-weight: bold;
}

.status-approved {
  color: #008000;
  font-weight: bold;
}

.status-rejected {
  color: #FF0000;
  font-weight: bold;
}

.status-assignedMechanic {
  color: #1E90FF;
  font-weight: bold;
}

.auction-date {
  font-weight: bold;
  color: #333;
}

.not-specified {
  color: #999;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .dashboard-cards {
    grid-template-columns: 1fr;
  }
}
    </style>
  </head>
  <body>
    <!-- Include Navbar Partial -->
    <%- include('partials/navbar', { currentPage: 'view-auctions' }) %>

    <!-- View Auctions Content -->
    <section class="seller-dashboard">
      <h1>Your Auction Listings</h1>
      <% if (auctions && auctions.length > 0) { %>
        <div class="dashboard-cards" id="auction-listings">
          <% auctions.forEach(auction => { %>
            <div class="dashboard-card">
              <h2><%= auction.vehicleName || 'Not specified' %></h2>
              <img src="<%= auction.vehicleImage || 'https://via.placeholder.com/300x200?text=No+Image' %>" 
                   alt="<%= auction.vehicleName || 'Vehicle image' %>" 
                   style="width: 100%; height: auto; border-radius: 0.5rem; margin-bottom: 1rem;">
              
              <p><strong>Year:</strong> <%= auction.year || 'Not specified' %></p>
              <p><strong>Mileage:</strong> <%= auction.mileage ? `${auction.mileage} km` : 'Not specified' %></p>
              <p><strong>Fuel Type:</strong> <%= helpers.capitalize(auction.fuelType) %></p>
              <p><strong>Transmission:</strong> <%= helpers.capitalize(auction.transmission) %></p>
              <p><strong>Condition:</strong> <%= helpers.capitalize(auction.condition) %></p>
              <p><strong>Auction Date:</strong> <span class="auction-date"><%= helpers.formatDate(auction.auctionDate) %></span></p>
              <p><strong>Starting Bid:</strong> <%= auction.startingBid ? `â‚¹${auction.startingBid}` : 'Not specified' %></p>
              
              <p>
                <strong>Status:</strong> 
                <span class="status-<%= auction.status || 'pending' %>">
                  <%= helpers.capitalize(auction.status) %>
                </span>
              </p>
              
              <% if (auction.status === 'approved' || auction.status === 'assignedMechanic') { %>
                <a href="/seller_dashboard/view-bids?auctionId=<%= auction._id %>" class="card-btn">View Bids</a>
              <% } %>
              
              <% if (auction.status === 'pending') { %>
                <p class="status-pending">Your request is under review</p>
              <% } %>
            </div>
          <% }); %>
        </div>
      <% } else { %>
        <div style="text-align: center; padding: 2rem;">
          <p>You haven't listed any vehicles for auction yet.</p>
          <a href="/seller_dashboard/add-auction" class="card-btn">Add Auction Listing</a>
        </div>
      <% } %>
    </section>

    <!-- Include Footer Partial -->
    <%- include('partials/footer') %>

    <script>
      // Logout button functionality
      document.querySelector('.logout-btn')?.addEventListener('click', () => {
        window.location.href = '/logout';
      });
    </script>
  </body>
</html>